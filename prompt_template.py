from jinja2 import Template

"""
将普通电话改写
"""
def phone_prompt(content):
    case_tpl = """
【任务】
对给定的电话录音文本进行改写。
【要求】
1. 通话双方统一标注：主叫为 A，被叫为 B。
2. 如果只有主叫通话信息，模拟补充被叫的通话内容。
3. 在保证通话语气和逻辑真实自然的前提下，尽量还原实际交流内容。
4. 必须对涉及敏感信息进行脱敏处理（包括但不限于：姓名、手机号、身份证号、地址、银行卡号、单位名称等）。
5. 输出结果 仅包含改写后的通话文本，不得添加解释、总结或其他额外内容。
【通话内容】
{{content}}
    """
    tpl = Template(case_tpl)
    return tpl.render(content=content)

"""
将报案信息转换为报警电话
"""
def case_prompt(content):
    case_tpl = """
【任务】
根据提供的案情信息，模拟一段真实的报警电话通话内容。
【要求】
1. 通话双方：报警人用 A 表示，接警人用 B 表示。
2. 真实还原实际报案的通话内容。
3. 输出内容仅包含模拟通话，不添加任何解释、总结或额外信息。
【案情信息】
{{content}}
    """
    tpl = Template(case_tpl)
    return tpl.render(content=content)

"""
将报案信息转换为诈骗电话
"""
def case2call_prompt(content):
    case_call_tpl ="""
【角色】
你是一名反电话诈骗专家。
【任务】
根据提供的案情信息，模拟诈骗者与受害者之间的首次电话通话内容，用于识别类似诈骗电话。
【要求】
1. 诈骗者用 A 表示，受害者用 B 表示。
2. 如果案情信息反映的不是电话诈骗，直接返回 "非电话诈骗"。
3. 真实还原当时的通话内容。
4. 输出内容仅包含模拟的通话，不做任何解释或额外说明
【案情信息】
{{content}}
    """
    tpl = Template(case_call_tpl)
    return tpl.render(content=content)

"""
提取电话中主叫的事件演化图
"""
def maincall2eeg_prompt(content):
    case_eeg_tpl ="""
【任务】
1.针对通话主叫人的发言内容，识别并抽取能够体现其意图的核心话术。
2.将这些话术抽象、泛化为语义完整的动宾短语结构（事件）。
3.按照通话时间顺序，将事件串联成一个事件演化列表，用来刻画主叫人意图的发展过程。
【要求】
1. 按照通话的时间顺序输出事件，形成事件演化链。
2. 每条链不超过10个事件，保留关键转折点即可。
3. 常见事件类型包括：
    *身份声明（自称身份）
    *起因说明（告知问题/原因）
    *诉求提出（要求某种行为）
    *动机解释（说明理由/强调必要性）
    *结果承诺（承诺解决问题/带来好处）
    *行动引导（指引下一步操作）
4.严格按照输出格式输出，不要包含无关内容。
【输出格式】
["事件1(动宾短语)", "事件2(动宾短语)", "事件3(动宾短语)"]
【通话主叫信息】
{{content}}
    """
    tpl = Template(case_eeg_tpl)
    return tpl.render(content=content)

# def call2eeg_prompt(content):
#     case_eeg_tpl ="""
# 【任务】
# 1. 为了识别类似的电话,针对通话信息,抽取通话中的核心话术,用来组成通话过程的事件演化图
# 2. 事件是抽象、泛化、语义完整的动宾短语
# 3. 将抽取出来的事件按时间顺序构成一个列表，列表的节点是事件
# 【要求】
# 1. 按输出格式输出,不要输出其他无关内容
# 2. 选取最核心的事件抽取,例如:'主叫动机'、'自称'属于核心事件
# 3. 抽取的事件不超过10个
# 【输出格式】
# ["事件1(动宾短语)", "事件2(动宾短语)", "事件3(动宾短语)"]
# 【通话信息】
# {{content}}
#     """
#     tpl = Template(case_eeg_tpl)
#     return tpl.render(content=content)

# def call2eeg_prompt(content):
#     case_eeg_tpl ="""
#     【任务】
#     1. 为了识别类似的诈骗电话，针对通话信息，抽取通话中的核心诈骗事件
#     2. 事件是由（主语,谓语,宾语）三元组组成
#     3. 将抽取出来的事件按时间顺序构成有向无环图（图的节点是事件，边是事件演化的过程）
#     【要求】
#     1. 按输出格式输出，不要输出其他无关内容
#     2. 抽取的事件是诈骗的核心流程，例如："受害者信以为真"等，属于非核心流程，可以不用抽取
#     3. 抽取的事件如果超过10个,选取最核心的事件抽取,保证最终不超过10个事件
#     【输出格式】
#     {
#         "nodes": {
#             "1": "(诈骗者,自称,吉兔物流客服)",
#             "2": "(诈骗者,声称,洗面奶在运输途中被病毒感染)",
#             "3": "(诈骗者,提出,补偿40元)",
#         },
#         "edges": [
#             {
#                 "from": "1",
#                 "to": "2"
#             },
#             {
#                 "from": "2",
#                 "to": "3"
#             }
#         ]
#     }
#     【通话信息】
#     {{content}}
#     """
#     tpl = Template(case_eeg_tpl)
#     return tpl.render(content=content)

# def call2eeg_prompt(content):
#     case_eeg_tpl ="""
# 【任务】
# 1. 为了识别类似的电话,针对通话信息,抽取通话中的核心事件,用来组成通话过程的事件演化图
# 2. 事件是由（主语,谓语,宾语）三元组组成
# 3. 将抽取出来的事件按时间顺序构成有向无环图（图的节点是事件，边是事件演化的过程）
# 【要求】
# 1. 按输出格式输出,不要输出其他无关内容
# 2. 选取最核心的事件抽取,抽取的事件不超过10个
# 【输出格式】
# {
#     "nodes": {
#         "1": "(主语,谓语,宾语)",
#         "2": "(主语,谓语,宾语)",
#     },
#     "edges": [
#         {
#             "from": "1",
#             "to": "2"
#         }
#     ]
# }
# 【通话信息】
# {{content}}
#     """
#     tpl = Template(case_eeg_tpl)
#     return tpl.render(content=content)


